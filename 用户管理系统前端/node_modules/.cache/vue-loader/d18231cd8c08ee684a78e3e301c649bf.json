{"remainingRequest":"D:\\Files\\Java资料\\黑马程序员\\Vue\\黑马程序员Vue全套视频教程，从vue2.0到vue3.0一套全覆盖\\Vue3\\配套资料\\其他资料（不含视频）\\day 09\\代码\\code\\code-users\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Files\\Java资料\\黑马程序员\\Vue\\黑马程序员Vue全套视频教程，从vue2.0到vue3.0一套全覆盖\\Vue3\\配套资料\\其他资料（不含视频）\\day 09\\代码\\code\\code-users\\src\\components\\UserList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Files\\Java资料\\黑马程序员\\Vue\\黑马程序员Vue全套视频教程，从vue2.0到vue3.0一套全覆盖\\Vue3\\配套资料\\其他资料（不含视频）\\day 09\\代码\\code\\code-users\\src\\components\\UserList.vue","mtime":1677599190733},{"path":"D:\\Files\\Java资料\\黑马程序员\\Vue\\黑马程序员Vue全套视频教程，从vue2.0到vue3.0一套全覆盖\\Vue3\\配套资料\\其他资料（不含视频）\\day 09\\代码\\code\\code-users\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Files\\Java资料\\黑马程序员\\Vue\\黑马程序员Vue全套视频教程，从vue2.0到vue3.0一套全覆盖\\Vue3\\配套资料\\其他资料（不含视频）\\day 09\\代码\\code\\code-users\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Files\\Java资料\\黑马程序员\\Vue\\黑马程序员Vue全套视频教程，从vue2.0到vue3.0一套全覆盖\\Vue3\\配套资料\\其他资料（不含视频）\\day 09\\代码\\code\\code-users\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Files\\Java资料\\黑马程序员\\Vue\\黑马程序员Vue全套视频教程，从vue2.0到vue3.0一套全覆盖\\Vue3\\配套资料\\其他资料（不含视频）\\day 09\\代码\\code\\code-users\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdVc2VyTGlzdCcsDQogIGRhdGEoKSB7DQogICAgLy8g5aOw5piO5qCh6aqM5bm06b6E55qE5Ye95pWwDQogICAgbGV0IGNoZWNrQWdlID0gKHJ1bGUsIHZhbHVlLCBjYikgPT4gew0KICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSkgew0KICAgICAgICByZXR1cm4gY2IobmV3IEVycm9yKCfor7floavlhpnmlbTmlbDvvIEnKSkNCiAgICAgIH0NCiAgICAgIGlmICh2YWx1ZSA+IDEwMCB8fCB2YWx1ZSA8IDEpIHsNCiAgICAgICAgcmV0dXJuIGNiKG5ldyBFcnJvcign5bm06b6E5b+F6aG75ZyoIDEg5YiwIDEwMCDkuYvpl7TvvIEnKSkNCiAgICAgIH0NCiAgICAgIGNiKCkNCiAgICB9DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXJMaXN0OiBbXSwNCiAgICAgIC8vIOaOp+WItua3u+WKoOWvueivneahhueahOaYvuekuuS4jumakOiXjw0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICAvLyDopoHph4fpm4bnmoTnlKjmiLfnmoTkv6Hmga/lr7nosaENCiAgICAgIGZvcm06IHsNCiAgICAgICAgbmFtZTogJycsDQogICAgICAgIGFnZTogJycsDQogICAgICAgIHBvc2l0aW9uOiAnJywNCiAgICAgIH0sDQogICAgICAvLyDooajljZXnmoTpqozor4Hop4TliJnlr7nosaENCiAgICAgIGZvcm1SdWxlczogew0KICAgICAgICBuYW1lOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+Wnk+WQjeaYr+W/heWhq+mhuScsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgIHsgbWluOiAxLCBtYXg6IDE1LCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDEg5YiwIDE1IOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBdLA0KICAgICAgICBhZ2U6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5bm06b6E5piv5b+F5aGr6aG5JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrQWdlLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcG9zaXRpb246IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5aS06KGU5piv5b+F5aGr6aG5JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgICAgeyBtaW46IDEsIG1heDogMTAsIG1lc3NhZ2U6ICfplb/luqblnKggMSDliLAgMTAg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFVzZXJMaXN0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOiOt+WPlueUqOaIt+WIl+ihqOeahOaVsOaNrg0KICAgIGFzeW5jIGdldFVzZXJMaXN0KCkgew0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCcvZmluZEFsbCcpDQogICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMCkgcmV0dXJuIGNvbnNvbGUubG9nKCfnlKjmiLfliJfooajmlbDmja7ojrflj5blpLHotKXvvIEnKQ0KICAgICAgdGhpcy51c2VyTGlzdCA9IHJlcy5kYXRhDQogICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXJMaXN0KQ0KICAgIH0sDQogICAgLy8g55uR5ZCs5a+56K+d5qGG5YWz6Zet55qE5LqL5Lu2DQogICAgb25EaWFsb2dDbG9zZWQoKSB7DQogICAgICAvLyDmi7/liLAgRm9ybSDnu4Tku7bnmoTlvJXnlKjvvIzosIPnlKggcmVzZXRGaWVsZHMg5Ye95pWw77yM5Y2z5Y+v6YeN572u6KGo5Y2VDQogICAgICB0aGlzLiRyZWZzLm15YWRkRm9ybS5yZXNldEZpZWxkcygpDQogICAgfSwNCiAgICAvLyDnlKjmiLfngrnlh7vkuobmt7vliqDmjInpkq4NCiAgICBvbkFkZE5ld1VzZXIoKSB7DQogICAgICB0aGlzLiRyZWZzLm15YWRkRm9ybS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHJldHVybg0KICAgICAgICAvLyDpnIDopoHmiafooYzmt7vliqDnmoTkuJrliqHlpITnkIYNCiAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHRoaXMuZm9ybSkNCiAgICAgICAgaWYgKHJlcy5zdGF0dXMgIT09IDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfmt7vliqDnlKjmiLflpLHotKXvvIEnKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOaIkOWKn++8gScpDQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOeCueWHu+S6huWIoOmZpOeahOmTvuaOpQ0KICAgIGFzeW5jIG9uUmVtb3ZlKGlkKSB7DQogICAgICAvLyDor6Lpl67nlKjmiLfmmK/lkKbliKDpmaQNCiAgICAgIGNvbnN0IGNvbmZpcm1SZXN1bHQgPSBhd2FpdCB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XnlKjmiLcsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICB9KS5jYXRjaChlcnIgPT4gZXJyKQ0KDQogICAgICAvLyDliKTmlq3mmK/lkKbngrnlh7vkuobnoa7orqTmjInpkq4NCiAgICAgIGlmIChjb25maXJtUmVzdWx0ICE9PSAnY29uZmlybScpIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+WPlua2iOS6huWIoOmZpO+8gScpDQoNCiAgICAgIC8vIOWPkei1t+ivt+axgu+8jOWIoOmZpOaMh+WumiBpZCDnmoTmlbDmja4NCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmRlbGV0ZSgnL2FwaS91c2Vycy8nICsgaWQpDQogICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWksei0pe+8gScpDQogICAgICAvLyDmj5DnpLrliKDpmaTmiJDlip/vvIzlubbliLfmlrDliJfooajmlbDmja4NCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5Yqf77yBJykNCiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQ0KICAgIH0sDQogIH0sDQp9DQo="},{"version":3,"sources":["UserList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserList.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 添加按钮 -->\r\n    <el-button type=\"primary\" @click=\"dialogVisible = true\">添加新用户</el-button>\r\n\r\n    <!-- 用户的表格 -->\r\n    <el-table :data=\"userList\" stripe border>\r\n      <!-- 这是索引列 -->\r\n      <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n      <!-- 渲染用户名这一列 -->\r\n      <el-table-column label=\"姓名\" prop=\"userName\"></el-table-column>\r\n      <el-table-column label=\"年龄\" prop=\"age\"></el-table-column>\r\n      <el-table-column label=\"性别\" prop=\"sex\"></el-table-column>\r\n      <el-table-column label=\"手机号码\" prop=\"phoneNum\"></el-table-column>\r\n      <el-table-column label=\"地址\" prop=\"address\"></el-table-column>\r\n      <el-table-column label=\"创建时间\">\r\n        <template #default=\"scope\">\r\n          {{ scope.row.addtime | dateFormat }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <!-- v-slot:default=\"scope\" -->\r\n        <!-- #default=\"scope\" -->\r\n        <!-- v-slot=\"scope\" -->\r\n        <template v-slot=\"{ row }\">\r\n          <div>\r\n            <router-link :to=\"'/users/' + row.id\">详情</router-link>&nbsp;\r\n            <a href=\"#\" @click.prevent=\"onRemove(row.id)\">删除</a>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 添加用户的对话框 -->\r\n    <el-dialog title=\"添加新用户\" :visible.sync=\"dialogVisible\" width=\"50%\" @close=\"onDialogClosed\">\r\n      <!-- 添加用户的表单 -->\r\n      <el-form :model=\"form\" label-width=\"80px\" :rules=\"formRules\" ref=\"myaddForm\">\r\n        <!-- 采集用户的姓名 -->\r\n        <el-form-item label=\"用户姓名\" prop=\"name\">\r\n          <el-input v-model=\"form.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户年龄\" prop=\"age\">\r\n          <el-input v-model.number=\"form.age\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户头衔\" prop=\"position\">\r\n          <el-input v-model=\"form.position\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"onAddNewUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'UserList',\r\n  data() {\r\n    // 声明校验年龄的函数\r\n    let checkAge = (rule, value, cb) => {\r\n      if (!Number.isInteger(value)) {\r\n        return cb(new Error('请填写整数！'))\r\n      }\r\n      if (value > 100 || value < 1) {\r\n        return cb(new Error('年龄必须在 1 到 100 之间！'))\r\n      }\r\n      cb()\r\n    }\r\n    return {\r\n      userList: [],\r\n      // 控制添加对话框的显示与隐藏\r\n      dialogVisible: false,\r\n      // 要采集的用户的信息对象\r\n      form: {\r\n        name: '',\r\n        age: '',\r\n        position: '',\r\n      },\r\n      // 表单的验证规则对象\r\n      formRules: {\r\n        name: [\r\n          { required: true, message: '姓名是必填项', trigger: 'blur' },\r\n          { min: 1, max: 15, message: '长度在 1 到 15 个字符', trigger: 'blur' },\r\n        ],\r\n        age: [\r\n          { required: true, message: '年龄是必填项', trigger: 'blur' },\r\n          { validator: checkAge, trigger: 'blur' },\r\n        ],\r\n        position: [\r\n          { required: true, message: '头衔是必填项', trigger: 'blur' },\r\n          { min: 1, max: 10, message: '长度在 1 到 10 个字符', trigger: 'blur' },\r\n        ],\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n    this.getUserList()\r\n  },\r\n  methods: {\r\n    // 获取用户列表的数据\r\n    async getUserList() {\r\n      const { data: res } = await this.$http.get('/findAll')\r\n      if (res.status !== 0) return console.log('用户列表数据获取失败！')\r\n      this.userList = res.data\r\n      console.log(this.userList)\r\n    },\r\n    // 监听对话框关闭的事件\r\n    onDialogClosed() {\r\n      // 拿到 Form 组件的引用，调用 resetFields 函数，即可重置表单\r\n      this.$refs.myaddForm.resetFields()\r\n    },\r\n    // 用户点击了添加按钮\r\n    onAddNewUser() {\r\n      this.$refs.myaddForm.validate(async valid => {\r\n        if (!valid) return\r\n        // 需要执行添加的业务处理\r\n        const { data: res } = await this.$http.post('/api/users', this.form)\r\n        if (res.status !== 0) return this.$message.error('添加用户失败！')\r\n        this.$message.success('添加成功！')\r\n        this.dialogVisible = false\r\n        this.getUserList()\r\n      })\r\n    },\r\n    // 点击了删除的链接\r\n    async onRemove(id) {\r\n      // 询问用户是否删除\r\n      const confirmResult = await this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      }).catch(err => err)\r\n\r\n      // 判断是否点击了确认按钮\r\n      if (confirmResult !== 'confirm') return this.$message.info('取消了删除！')\r\n\r\n      // 发起请求，删除指定 id 的数据\r\n      const { data: res } = await this.$http.delete('/api/users/' + id)\r\n      if (res.status !== 0) return this.$message.error('删除失败！')\r\n      // 提示删除成功，并刷新列表数据\r\n      this.$message.success('删除成功！')\r\n      this.getUserList()\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-table {\r\n  margin-top: 15px;\r\n}\r\n</style>\r\n"]}]}